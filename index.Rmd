---
title: "Housing Fluctuation using Case-Shiller Index"
description: |
  This project is about observing and analysing the housing fluctuation of an single familly house from 1987 to Janurary 2021 of three cities: Boston, New York City and San Francisco. 
site: distill::distill_website
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)

library(tidyverse)
library(lubridate)
library(dplyr)
library(plotly)
library(gganimate)
library(gifski)
library(png)
library(patchwork)
library(gapminder)

# Learn more about creating websites with Distill at:
# https://rstudio.github.io/distill/website.html

# Learn more about publishing to GitHub Pages at:
# https://rstudio.github.io/distill/publish_website.html#github-pages
```

```{r}
raw_housing_BO <- read.csv("BOXRSA.csv")
raw_housing_NY <- read.csv("NYXRSA.csv")
raw_housing_SF <- read.csv("SFXRSA.csv")

housing_BO <- raw_housing_BO %>%
mutate(City="Boston") %>%
mutate(Data_housing= BOXRSA)

housing_NY <- raw_housing_NY %>%
  mutate(City="New York")%>%
  mutate(Data_housing= NYXRSA)

housing_SF <- raw_housing_SF %>%
  mutate(City ="San Francisco")%>%
mutate(Data_housing= SFXRSA)

clean_housing_data <-bind_rows(housing_BO,housing_NY,housing_SF)
```

```{r,echo=FALSE}
data_housing_final <- clean_housing_data %>%
select(DATE,Data_housing,City)%>%
  group_by(City) 
```

```{r}
data_housing_plotly <- data_housing_final%>%
ggplot(mapping=aes(x = DATE,y=Data_housing,color=City,group=1, text = paste("Date:",DATE, "\n")))+
  geom_line()+
  scale_x_discrete(breaks=12)+
  labs(title="Housing Price Fluctuation of Three Major Cities In US",x="Time (2000-2021)",y="Case-Shiller Housing Price Index")

   ggplotly(data_housing_plotly, tooltip = "text")
   par(mfrow=c(1,2))
     
```


```{r}
raw_pop_BO <- read.csv("BOSPOP.csv")
raw_pop_NY <- read.csv("NYTPOP.csv")
raw_pop_SF <- read.csv("SFCPOP.csv")

pop_BO <- raw_pop_BO %>%
mutate(City="Boston") %>%
mutate(Data_pop= BOSPOP)

pop_NY <- raw_pop_NY %>%
  mutate(City="New York")%>%
  mutate(Data_pop= NYTPOP)

pop_SF <- raw_pop_SF %>%
  mutate(City ="San Francisco")%>%
mutate(Data_pop= SFCPOP)

clean_pop_data <-bind_rows(pop_BO,pop_NY,pop_SF)
```


```{r,echo=FALSE}
data_pop_final <- clean_pop_data %>%
select(DATE,Data_pop,City)%>%
  group_by(City) 
```


```{r}
data_pop_plotly <- data_pop_final%>%
ggplot(mapping=aes(x = DATE,y=Data_pop,color=City,group=1, text = paste("Date:",DATE, "\n")))+
  geom_line()+
  scale_x_discrete(breaks=12)+
  labs(title="Population of Three Major Cities in US Overtime",x="Time (2000-2020)",y="Population In Thousands")

   ggplotly(data_pop_plotly, tooltip = "text")
     
```


# Analysis graph 1 #
San Francisco endured the greatest decline in 2008 Housing bubble, as well as the greatest increased after the crash, and for all three cities housing price shows an upward sloping trend, which means that the value of an single-family house keep increasing over time. 


# Analysis graph 2 #
By comparing the first graph and the second, it seems like population is not an factor on housing as San Francisco does not have an greater population than New York City and Boston, and it seems like it doesn't have an huge increase in population than the other two cities, we can conclude by saying population is not an major factor that determine the housing Price. 


